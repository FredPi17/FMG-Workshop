{% extends 'base.html.twig' %}
{% block stylesheets %}
    <style>
        .a{
            color: white;
        }
        .margin{
            margin-bottom: 10px;
        }
        .body{
            height: -webkit-fill-available;
            margin-top: 25%;
        }
    </style>
{% endblock %}
{% block body %}
    <div class="col-lg-8 offset-2">
    {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_CREATOR') %}

        <h1>Liste des cours</h1>

        <table class="table">
            <thead>
            <tr>
                <th scope="col">Id</th>
                <th scope="col">Title</th>
                <th scope="col">Introduction</th>
                <th scope="col">Image</th>
                <th scope="col">Category</th>
                <th scope="col">Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for cour in cours %}
                <tr>
                    <td><a href="{{ path('cours_show', { 'id': cour.id }) }}">{{ cour.id }}</a></td>
                    <td>{{ cour.title }}</td>
                    <td>{{ cour.introduction }}</td>
                    <td><img src="{{ asset('uploads/cours/' ~ cour.image) }}" width="50px" height="50px"/></td>
                    <td>{{ cour.category.name }}</td>
                    <td>
                        <a href="{{ path('cours_show', { 'id': cour.id }) }}">Afficher</a>
                        {% if is_granted('ROLE_ADMIN') %}
                            <a href="{{ path('cours_edit', { 'id': cour.id }) }}">Modifier</a>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        <ul>
            <li>
                <a href="{{ path('cours_new') }}">Créer un nouveau cours</a>
            </li>
        </ul>
    {% else %}
        <div class="text-center body">
            <h2>Vous n'êtes pas autorisé à accéder à cette page</h2>
            <h4>Vous devez être administrateur pour accéder à cette page</h4>
            <div class="text-muted">Veuillez vous connecter</div>
            <br>
            <button class="btn btn-secondary margin"><a class="a"href="{{ path('fos_user_security_login') }}">Me connecter</a></button>
            <br>
        </div>
    {% endif %}
    </div>

{% endblock %}
